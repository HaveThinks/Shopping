define("service:widget/expstore/authorized/index.js",function(require,exports,module){var storeItem=function(obj){{var __t,__p="";Array.prototype.join}with(obj||{}){__p+="";for(var i=0;i<data.length;i++)__p+='\n<div class="authorized-list-i J_storeItem" data-lng="'+(null==(__t=data[i].jingdu)?"":__t)+'" data-lat="'+(null==(__t=data[i].weidu)?"":__t)+'">\n    <i>1</i>\n    <h3>'+(null==(__t=data[i].title)?"":__t)+"</h3>\n    ",data[i].lianxidianhua&&(__p+="<p>电&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;话："+(null==(__t=data[i].lianxidianhua)?"":__t)+"</p>"),__p+="\n    <p>地&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;址："+(null==(__t=data[i].province)?"":__t)+(null==(__t=data[i].city)?"":__t)+(null==(__t=data[i].yingyedizhi)?"":__t)+'</p>\n    <p>工&nbsp;&nbsp;作&nbsp;日：周一至周日</p>\n    <p>营业时间：8:00-20:00</p>\n    <span><img src="'+(null==(__t="/static/service/widget/expstore/authorized/images/icon1_35a7b721.png")?"":__t)+'">试乘试驾</span>\n    <span><img src="'+(null==(__t="/static/service/widget/expstore/authorized/images/icon2_b1bb1cc7.png")?"":__t)+'">现场讲解</span>\n    <span><img src="'+(null==(__t="/static/service/widget/expstore/authorized/images/icon3_8a9ce2fd.png")?"":__t)+'">聊天聚会</span>\n    <span><img src="'+(null==(__t="/static/service/widget/expstore/authorized/images/icon4_81f8a31a.png")?"":__t)+'">紧急维修</span>\n    <span><img src="'+(null==(__t="/static/service/widget/expstore/authorized/images/icon5_5a16141b.png")?"":__t)+'">道路救援</span>\n    <span><img src="'+(null==(__t="/static/service/widget/expstore/authorized/images/icon6_b3f21dc1.png")?"":__t)+'">现货销售</span>\n</div>\n';__p+=""}return __p};module.exports={init:function(t){var i=this;i.pageOptions=t,$(".J_serviceMenu").on("mouseenter",function(){$(this).addClass("active")}).on("mouseleave",function(){$(this).removeClass("active")}),i.event(),i.mapObj=new AMap.Map("container"),AMap.plugin(["AMap.ToolBar","AMap.Scale","AMap.OverView"],function(){i.mapObj.addControl(new AMap.ToolBar),i.mapObj.addControl(new AMap.Scale),i.mapObj.addControl(new AMap.OverView({isOpen:!0}))});for(var a=0;a<i.pageOptions.address.length;a++){var n=i.pageOptions.address[a],e=new AMap.Marker({position:n.point,title:n.title});e.setMap(i.mapObj)}i.mapObj.setFitView(),i.conPrivince="",i.conCity="",i.conKeyword="",i.listevent()},event:function(){var t=this;$(".J_sbcon").on("mouseenter",function(){$(this).addClass("active")}).on("mouseleave",function(){$(this).removeClass("active")}),$("body").delegate(".J_privinceItem","click",function(){var i=$(this).data("id");t.conPrivince=i,$(".J_inputPrivince").val($(this).html()),t.getCity()}),$("body").delegate(".J_cityItem","click",function(){var i=$(this).data("id");t.conCity=i,$(".J_inputCity").val($(this).html()),t.getList()}),$(".J_sbbtn").on("click",function(){0!=$.trim($(".J_sbinput").val()).length&&t.getList({type:"zhuanying",a:"all_arc",c:"Api",search:"1",keyword:$(".J_sbinput").val()})})},listevent:function(){var t=this,i=$(".J_storeItem");i.on("click",function(){var i=$(this);t.mapObj.setZoomAndCenter(14,i.data("point").split(","));new AMap.Marker({map:t.mapObj,position:i.data("point").split(",")})})},getPrivince:function(){var t=this,i={a:"all",c:"Api",type:"zhuanying"};t.getData(i,function(i){for(var a="",n=0;n<i.data.length;n++){var e=i.data[n];a+="<dt class='J_privinceItem' data-id='"+e.id+"'>"+e.name+"</dt>"}$(".J_privinceList").html(a),$(".J_inputPrivince").val(i.data[0].name),t.conPrivince=i.data[0].id,t.getCity()})},getCity:function(){var t=this,i={catid:t.conPrivince,a:"son",c:"Api",type:"zhuanying"};t.getData(i,function(i){for(var a="",n=0;n<i.data.length;n++){var e=i.data[n];a+="<dt class='J_cityItem' data-id='"+e.id+"'>"+e.name+"</dt>"}$(".J_cityList").html(a),$(".J_inputCity").val(i.data[0].name),t.conCity=i.data[0].id,t.getList()})},getList:function(t){var i=this,a={catid:i.conCity,type:"zhuanying",a:"all_arc",c:"Api"};i.getData(t||a,function(t){var a=storeItem(t);i.mapObj.clearMap();for(var n=0;n<t.data.length;n+=1){var e=t.data[n],s=new AMap.Marker({position:[e.jingdu,e.weidu],title:e.title});s.setMap(i.mapObj)}i.mapObj.setFitView(),$(".authorized-list").html(a),i.listevent()})},getData:function(t,i){var a="http://cms.niu.com/news/index.php";$.ajax({url:a,data:t,timeout:5e3,type:"get",dataType:"jsonp",success:function(t){t&&0!==!+t.status&&i(t)},error:function(){}})}}});